train.data <- read.table("./train/X_train.txt")
train.subjects <- read.table("./train/subject_train.txt",col.names="subjects")
train.activity <- read.table("./train/y_train.txt",col.names="activity")
test.data <- read.table("./test/X_test.txt")
test.subjects <- read.table("./test/subject_test.txt",col.names="subjects")
test.activity <- read.table("./test/y_test.txt",col.names="activity")
complete.train <- cbind(train.subjects,train.activity,train.data)
complete.test <- cbind(test.subjects,test.activity,test.data)
tidy.set.full <- rbind(complete.train,complete.test)
colnames(tidy.set.full)[3:8] <- c("tbodyacc.mean.x","tbodyacc.mean.y","tbodyacc.mean.z","tbodyacc.sd.x","tbodyacc.sd.y","tbodyacc.sd.z")
colnames(tidy.set.full)[43:48] <- c("tgravityacc.mean.x","tgravityacc.mean.y","tgravityacc.mean.z","tgravityacc.sd.x","tgravityacc.sd.y","tgravityacc.sd.z")
colnames(tidy.set.full)[123:128] <- c("tbodygyro.mean.x","tbodygyro.mean.y","tbodygyro.mean.z","tbodygyro.sd.x","tbodygyro.sd.y","tbodygyro.sd.z")
colnames(tidy.set.full)[268:273] <- c("fbodyacc.mean.x","fbodyacc.mean.y","fbodyacc.mean.z","fbodyacc.sd.x","fbodyacc.sd.y","fbodyacc.sd.z")       
colnames(tidy.set.full)[426:431] <- c("fbodygyro.mean.x","fbodygyro.mean.y","fbodygyro.mean.z","fbodygyro.sd.x","fbodygyro.sd.y","fbodygyro.sd.z")
tidy.set <- tidy.set.full[,c(1:8,43:48,123:128,268:273,426:431)]
tidy.set$subjects <- as.factor(tidy.set$subjects)
tidy.set$activity <- as.factor(tidy.set$activity)
levels(tidy.set$activity) <- c("walking","walking.upstairs","walking.downstairs","sitting","standing","laying")
tidy.set.sorted <- aggregate(tidy.set[3:32],by=list(subjects=tidy.set$subjects,activity=tidy.set$activity),mean)
write.table(tidy.set.sorted, file="tidydataset.txt", quote=FALSE)